!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,i){"use strict";function n(t,e,i){var n=e&&i||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var a=t.random||(t.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[n+s]=a[s];return e||r(a)}var o=i(6),r=i(8);t.exports=n},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.navigator=i.navigator||window.navigator,this._allowBeacons=i.allowBeacons||!1}return t.prototype.post=function(t,e){this._allowBeacons&&this.navigator.sendBeacon?this._sendBeacon(t,e):"withCredentials"in new XMLHttpRequest?this._sendXHR(t,e):"undefined"!=typeof XDomainRequest&&this._sendXDR(t,e)},t.prototype._sendBeacon=function(t,e){navigator.sendBeacon(t,JSON.stringify(e))},t.prototype._sendXHR=function(t,e){var i=new XMLHttpRequest;i.open("POST",t,!0);try{i.send(JSON.stringify(e))}catch(t){var n=void 0;n="ClickEvent"===e.event_tag?{current_url:e.data.current_url,referrer:e.data.referrer,isTrusted:e.data.isTrusted,element:{attributes:{},html:e.data.element.html,text:e.data.element.text}}:{current_url:e.data.current_url,referrer:e.data.referrer,isTrusted:e.data.isTrusted};var o={data:n,event_tag:e.event_tag,load_uid:e.load_uid,state:e.state,timestamp:e.timestamp,uid:e.uid,config:window.heirialConfig};i.send(JSON.stringify(o))}},t.prototype._sendXDR=function(t,e){var i=new XDomainRequest;i.open("POST",t),i.onload=function(){},i.send(JSON.stringify(e))},t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(e){n(this,t),this._document=e.document||document}return t.prototype.get=function(t){var e=this._document.cookie.match(new RegExp(t+"=([^\\s;]*)"));return t&&e?unescape(e[1]):""},t.prototype.set=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Tue, 19 Jan 2038 03:14:07 UTC",n=navigator.appName.indexOf("Internet Explorer");this._document.cookie=n?t+"="+e+"; path=/":t+"="+e+"; expires="+i+"; path=/"},t.prototype.session=function(t,e){this.set(t,e,"")},t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(0),r=[{selectors:["a","button"],name:"click",tag:"ClickEvent"}],a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.apiVersion="v2",this._location={current_url:window.location.href,referrer:document.referrer},this._document=e.document||document,this._AJAX=e._AJAX,this._intake=e.intake||"https://api.heirial.com/"+this.apiVersion,this._loadEventFired=!1,this._queue=[]}return t.prototype.bind=function(t,e,i){this._document.addEventListener?t.addEventListener(e,i):this._document.attachEvent&&t.attachEvent("on"+e,i)},t.prototype.track=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;window.onload=function(){for(var e=0,i=t.length;e<i;e+=1)for(var n=window.document.querySelectorAll(t[e].selectors.join(",")),o=0,r=n.length;o<r;o+=1){var a=heirial2._Event.fire.bind(this,t[e].tag);heirial2._Event.bind(n[o],t[e].name,a)}}},t.prototype.fire=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=heirial2._Event._getEndpoint(t),n=heirial2._Event._getTagFields(t),o=heirial2._Event._buildFields(t,e,n);if(heirial2._Event._loadEventFired)"LoadEvent"!==t&&heirial2._Event._send(i,o);else{for("LoadEvent"!==t&&heirial2._Event._queue.push({endpoint:i,fields:o});heirial2._Event._queue.length;){var r=heirial2._Event._queue.shift();heirial2._Event._send(r.endpoint,r.fields)}heirial2._Event._send(i,o),heirial2._Event._loadEventFired=!0}},t.prototype.map=function(t,e,i){this._send("map",{data:{current_url:this.currentUrl},reason:i,uid_1:t,uid_2:e})},t.prototype._getEndpoint=function(t){return"LoadEvent"===t?"intake/load":"intake/page"},t.prototype._getTagFields=function(t){var e=void 0,i=void 0;return"LoadEvent"===t?(e=heirial2.loadUid,i="0"):(i=heirial2.loadUid,e="UnloadEvent"===t?heirial2.visitUid:o()),{uid:e,load_uid:i}},t.prototype._buildFields=function(t,e,i){var n=e.target,o={},r={element:{attributes:o}};if("ClickEvent"===t){Object.keys(n.attributes).map(function(t,e){n.attributes[t]&&(r.element.attributes[n.attributes[t].name]=n.attributes[t].value)}),r.element.text=n.innerHTML,r.element.html=n.outerHTML,i.state=heirial2.state,i.data=this._location;for(var a=Object.keys(r),s=0;s<a.length;s+=1)i.data[a[s]]=r[a[s]];return i.timestamp=(new Date).toISOString(),i.event_tag=t,i}i.state=heirial2.state,i.data=this._location;for(var u=Object.keys(e),d=0;d<u.length;d+=1)i.data[u[d]]=e[u[d]];return i.timestamp=(new Date).toISOString(),i.event_tag=t,i},t.prototype._send=function(t,e){e.config=window.heirialConfig,console.log(this._intake+"/"+t),heirial2._Ajax.post("http://localhost:3000/"+t+"/",e)},t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(5),r=n(o),a=i(1),s=n(a),u=i(2),d=n(u),l=i(3),c=n(l);!window.heirial2&&navigator.cookieEnabled&&(window.heirial2=new r.default({AjaxInterface:new s.default,CookieManager:new d.default(document),EventManager:new c.default},window.heirialConfig||{}))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(0),r=(i(1),i(2),i(3),function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this._Ajax=e.AjaxInterface,this._Cookie=e.CookieManager,this._Event=e.EventManager,this._options=i,this.version="2.0.0-dev",this.visitorUid=this._getVisitorUid(),this.visitUid=this._getVisitUid(),this.loadUid=this._getLoadUid(),this.state=this._buildState(),this._setCookies(),this._bindEvents(),this.fire=this._Event.fire}return t.prototype._getVisitorUid=function(){var t=this._Cookie.get("heirial2.uid");if(!t){var e=this._Cookie.get("heirial.uid");t=o(),e&&this._Event.map(e,t,"Automatic migration from 1.0.0 to "+this.version)}return t},t.prototype._getVisitUid=function(){return this._Cookie.get("heirial2.vid")||o()},t.prototype._getLoadUid=function(){return o()},t.prototype._buildState=function(){return this.visitorUid+"::"+this.visitUid+"::"+this.loadUid},t.prototype._setCookies=function(){this._Cookie.set("heirial2",this.state),this._Cookie.set("heirial2.uid",this.visitorUid),this._Cookie.session("heirial2.vid",this.visitUid),this._Cookie.set("heirial2.lid",this.loadUid)},t.prototype._bindEvents=function(){this._Event.bind(window,"load",this._Event.fire.bind(this,"LoadEvent")),this._Event.bind(window,"beforeunload",this._Event.fire.bind(this,"UnloadEvent")),this._Event.track()},t}());e.default=r},function(t,e,i){"use strict";(function(e){var i,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var o=new Uint8Array(16);i=function(){return n.getRandomValues(o),o}}if(!i){var r=new Array(16);i=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}t.exports=i}).call(e,i(7))},function(t,e,i){"use strict";var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}t.exports=n},function(t,e,i){"use strict";function n(t,e){var i=e||0,n=o;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}for(var o=[],r=0;r<256;++r)o[r]=(r+256).toString(16).substr(1);t.exports=n}]);